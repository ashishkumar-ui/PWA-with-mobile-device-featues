var defferedPrompt;"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(i){console.info("Service Worker registered",i.scope)}).catch(function(i){console.info("Service Worker could not be registered",i)}),window.addEventListener("beforeinstallprompt",function(i){i.preventDefault(),defferedPrompt=i});var notificationButtons=document.querySelectorAll(".enable-notifications");if("Notification"in window)for(var i=0;i<notificationButtons.length;i++){var button=notificationButtons[i];button.style.display="inline-block",button.addEventListener("click",requestNotificationPermission)}function requestNotificationPermission(i){Notification.requestPermission(function(i){"granted"!==i?console.log("Notification permission denied by user!"):(console.log("Notification permission accepted by user!"),configurePushSubscription())})}function displayConfirmNotification(){var n={body:"You have successfully subscribed app notification !",icon:"/src/images/icons/my-app-icon-96-96.png",image:"/src/images/tour-img.jpg",dir:"ltr",lang:"en-US",vibrate:[100,50,200],badge:"/src/images/icons/my-app-icon-96-96.png",tag:"confirm-notification",renotify:!1,actions:[{action:"confirm",title:"Okay",icon:"/src/images/icons/my-app-icon-96-96.png"},{action:"cancel",title:"Cancel",icon:"/src/images/icons/my-app-icon-96-96.png"}]};"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){i.showNotification("[SW] Notification granted!",n)})}function configurePushSubscription(){var o;"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(i){return(o=i).pushManager.getSubscription()}).then(function(i){var n=urlBase64ToUint8Array("BIzqU-Np3ERLPmlGGRHvWNigTK3c4ifoRCn59vzEmvgi2T3oBaYVn0gZK7uWE04ZK86DLIq_IXCQbQTUmfFoBRg");return o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}).then(function(i){return console.log(i),fetch("https://pwa-picnick.firebaseio.com/subscriptions.json",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)})}).then(function(i){i.ok&&displayConfirmNotification()}).catch(function(i){console.log(i)})}function updateOnlineStatus(i){document.body.className=i.type}window.addEventListener("online",updateOnlineStatus),window.addEventListener("offline",updateOnlineStatus);